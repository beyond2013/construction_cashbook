<%= form_with(model: voucher) do |form| %>
  <% if voucher.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(voucher.errors.count, "error") %> prohibited this voucher from being saved:</h2>

      <ul>
        <% voucher.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <%= form.label :date, style: "display: block" %>
    <%= form.date_field :date %>
  </div>

  <div>
    <%= form.label :voucher_number, style: "display: block" %>
    <%= form.text_field :voucher_number %>
  </div>

  <div>
    <%= form.label :voucher_type, style: "display: block" %>
    <%= form.text_field :voucher_type %>
  </div>

  <div>
    <%= form.label :description, style: "display: block" %>
    <%= form.textarea :description %>
  </div>

  <div>
    <%= form.label :project_id, style: "display: block" %>
    <%= form.text_field :project_id %>
  </div>
 <!-- Nested Voucher Entries -->
  <h3>Voucher Entries</h3>

  <%= form.fields_for :voucher_entries do |entry_form| %>
    <div class="nested-fields">
      <div class="field">
        <%= entry_form.label :account_id, "Account" %>
        <%= entry_form.collection_select :account_id, Account.all, :id, :name, prompt: "Select Account" %>
      </div>

      <div class="field">
        <%= entry_form.label :entry_type, "Entry Type" %>
        <%= entry_form.select :entry_type, options_for_select([["Debit", "debit"], ["Credit", "credit"]]), prompt: "Select Type" %>
      </div>

      <div class="field">
        <%= entry_form.label :amount %>
        <%= entry_form.number_field :amount, step: 0.01, placeholder: "e.g. 5000.00" %>
      </div>

      <div class="field">
        <%= entry_form.label :narration %>
        <%= entry_form.text_field :narration, placeholder: "Details about this entry" %>
      </div>

      <%= link_to "Remove Entry", '#', class: "remove_fields" %>
      <hr>
    </div>
  <% end %>

  <%= link_to "Add Entry", '#', class: "add_fields", data: {association: "voucher_entries"} %>


  <div>
    <%= form.submit %>
  </div>
<% end %>
